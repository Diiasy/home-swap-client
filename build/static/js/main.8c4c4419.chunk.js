(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){},128:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},189:function(e,t,a){},190:function(e,t,a){},191:function(e,t,a){},192:function(e,t,a){},194:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(29),l=a.n(s),c=(a(104),a(4)),i=a(5),o=a(7),m=a(6),u=(a(105),a(15)),d=a(9),h=a.n(d),p=a(19),f=a.n(p),v=h.a.create({baseURL:"http://localhost:3000",withCredentials:!0,headers:{"content-type":"application/x-www-form-urlencoded"}}),b=function(e){return JSON.parse(window.localStorage.getItem("user"))},E=function(e){return v({method:"POST",url:"/user/login",data:f.a.stringify(e)}).then((function(e){!function(e){window.localStorage.setItem("user",JSON.stringify(e))}(e.data)}))},g=function(e){window.localStorage.removeItem("user")},y=function(e){return window.localStorage.getItem("user")?r.a.createElement(u.b,{path:e.path,component:e.component}):r.a.createElement(u.a,{to:e.redirectTo})},N=a(12),j=(a(128),a(43)),O=a(44);var w=function(){var e=b();return e?r.a.createElement("div",{className:"navbar navbar-expand-lg navbar-light"},r.a.createElement("div",{className:"container-fluid nav"},r.a.createElement("div",{className:"brand"},r.a.createElement(N.b,{className:"nav-link navbar-icon img-fluid",to:"/"},r.a.createElement("img",{src:"/HomeSwap4.png",alt:"HomeSwap"}))),r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(N.b,{className:"nav-link p-2",to:"/properties"},"List")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(N.b,{className:"nav-link p-2",to:"/map"},"Map")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(N.b,{className:"nav-link p-2",to:"/conversations"},"My Messages")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(N.b,{className:"nav-link p-2",to:"/user/profile/".concat(e._id)},"Welcome ",e.username)),r.a.createElement("li",{className:"nav-item"},r.a.createElement(N.b,{className:"nav-link p-2",to:"/user/logout"},r.a.createElement(j.a,{icon:O.a})))))):r.a.createElement("div",{className:"navbar navbar-expand-lg navbar-light"},r.a.createElement("div",{className:"container-fluid nav"},r.a.createElement("div",{className:"brand"},r.a.createElement(N.b,{className:"nav-link navbar-icon",to:"/"},r.a.createElement("img",{src:"/HomeSwap4.png",alt:"HomeSwap"}))),r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(N.b,{className:"nav-link p-2",to:"/properties"},"List")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(N.b,{className:"nav-link p-2",to:"/map"},"Map")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(N.b,{className:"nav-link p-2",to:"/user/login"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(N.b,{className:"nav-link p-2",to:"/user/signup"},"Sign up")))))};a(131);var C=function(e){return r.a.createElement("div",null,r.a.createElement(w,null),e.children)},k=a(25),D=(a(42),function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={message:null},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get("".concat("http://localhost:3000"),{withCredentials:!0}).then((function(t){e.setState({message:t.data.message})}))}},{key:"render",value:function(){return r.a.createElement(C,null,r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement(k.a,null,r.a.createElement(k.a.Item,null,r.a.createElement("img",{className:"d-block w-100",src:"holder.js/800x400?text=First slide&bg=373940",alt:"First slide"}),r.a.createElement(k.a.Caption,null,r.a.createElement("h3",null,"First slide label"),r.a.createElement("p",null,"Nulla vitae elit libero, a pharetra augue mollis interdum."))),r.a.createElement(k.a.Item,null,r.a.createElement("img",{className:"d-block w-100",src:"holder.js/800x400?text=Second slide&bg=282c34",alt:"Third slide"}),r.a.createElement(k.a.Caption,null,r.a.createElement("h3",null,"Second slide label"),r.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit."))),r.a.createElement(k.a.Item,null,r.a.createElement("img",{className:"d-block w-100",src:"holder.js/800x400?text=Third slide&bg=20232a",alt:"Third slide"}),r.a.createElement(k.a.Caption,null,r.a.createElement("h3",null,"Third slide label"),r.a.createElement("p",null,"Praesent commodo cursus magna, vel scelerisque nisl consectetur.")))))))}}]),a}(n.Component)),S=a(23),x=a(8),U=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={user:{},error:null},n.handleChange=n.handleChange.bind(Object(x.a)(n)),n.signUpUser=n.signUpUser.bind(Object(x.a)(n)),n}return Object(i.a)(a,[{key:"handleChange",value:function(e){var t=Object(S.a)({},this.state.user);t[e.target.name]=e.target.value,this.setState({user:t})}},{key:"signUpUser",value:function(e){var t,a=this;e.preventDefault(),(t=this.state.user,v({method:"POST",url:"/user/signup",data:f.a.stringify(t)}).catch((function(e){return console.log(e)}))).then((function(){a.props.history.push("/user/login")})).catch((function(e){a.setState({error:e.response.data.errorMessage})}))}},{key:"render",value:function(){return r.a.createElement(C,null,r.a.createElement("div",{class:"container d-flex justify-content-center my-3"},r.a.createElement("div",{class:"col-8"},r.a.createElement("form",{id:"form"},r.a.createElement("h2",{className:"mb-4"},"Signup"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{className:"form-control",type:"text",onChange:this.handleChange,name:"username",placeholder:"Username"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"firstname"},"Name"),r.a.createElement("input",{className:"form-control",type:"text",onChange:this.handleChange,name:"name",placeholder:"Name"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{className:"form-control",type:"text",onChange:this.handleChange,name:"email",placeholder:"Email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"City"),r.a.createElement("input",{className:"form-control",type:"text",onChange:this.handleChange,name:"city",placeholder:"City"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{className:"form-control",type:"password",onChange:this.handleChange,name:"password",placeholder:"Password"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-label",for:"Name"},"Address"),r.a.createElement("input",{type:"text",className:"form-control form-box",name:"address",onChange:this.handleChange,placeholder:"Address and city"})),r.a.createElement("button",{onClick:this.signUpUser,type:"submit"},"Submit")))),this.state.error&&r.a.createElement("p",null,this.state.error))}}]),a}(n.Component),M=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={user:{username:"",password:""},error:null},n.handleChange=n.handleChange.bind(Object(x.a)(n)),n.loginUser=n.loginUser.bind(Object(x.a)(n)),n}return Object(i.a)(a,[{key:"handleChange",value:function(e){var t=Object(S.a)({},this.state.user);t[e.target.name]=e.target.value,this.setState({user:t})}},{key:"loginUser",value:function(e){var t=this;e.preventDefault(),E(this.state.user).then((function(){var e=b();t.props.history.push("/user/profile/".concat(e._id))})).catch((function(e){t.setState({error:e.response.data.errorMessage})}))}},{key:"render",value:function(){return r.a.createElement(C,null,r.a.createElement("div",{className:"container d-flex justify-content-center my-3"},r.a.createElement("div",{className:"col-8"},r.a.createElement("div",{id:"form"},r.a.createElement("h2",{className:"mb-4"},"Login"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username or email"),r.a.createElement("input",{className:"form-control",type:"text",onChange:this.handleChange,name:"usernameOrEmail",placeholder:"Username or email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{className:"form-control",type:"password",onChange:this.handleChange,name:"password",placeholder:"Password"})),r.a.createElement("button",{onClick:this.loginUser,type:"submit"},"Submit"))),this.state.error&&r.a.createElement("p",null,this.state.error)))}}]),a}(n.Component),P=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.get("/user/logout").then((function(){g()})).then((function(){e.props.history.push("/")})).catch((function(t){e.setState({error:t})}))}},{key:"render",value:function(){return r.a.createElement(C,null,r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h2",{className:"mb-4"},"See you soon!")))}}]),a}(n.Component),F=(a(85),function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={users:null,filteredUsers:null},n.searchProperties=n.searchProperties.bind(Object(x.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get("".concat("http://localhost:3000","/user/list"),{withCredentials:!0}).then((function(t){e.setState({users:t.data,filteredUsers:t.data})})).catch((function(t){e.setState({error:t})}))}},{key:"searchProperties",value:function(e){var t=this,a=e.target.value;if(0===a.length)return this.setState({filteredUsers:this.state.users});h()({url:"".concat("http://localhost:3000","/user/search?q=").concat(a),method:"GET",withCredentials:!0}).then((function(e){0!==e.data.length&&t.setState({filteredUsers:e.data})}))}},{key:"render",value:function(){return null===this.state.users?r.a.createElement(C,null,r.a.createElement("div",{className:"lds-ring col-12 d-flex justify-content-center mt-5"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))):r.a.createElement(C,null,r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row d-flex justify-content-end my-2"},r.a.createElement("form",{className:"form-inline mt-3 mr-4"},r.a.createElement("input",{className:"form-control mr-sm-2",type:"text","aria-label":"Search",placeholder:"Search properties",onChange:this.searchProperties})))),r.a.createElement("div",{className:"container-fluid center-box"},r.a.createElement("div",{className:"row m-3"},this.state.filteredUsers.map((function(e){return e.pictures.length>0&&r.a.createElement("div",{key:e._id,className:"col-sm-12 col-md-6 col-xl-4 my-2 d-flex justify-content-around"},r.a.createElement(N.b,{to:"/user/profile/".concat(e._id),className:"user-card"},r.a.createElement("div",{className:"card"},r.a.createElement("h5",{className:"card-title p-2"},e.homeName),r.a.createElement("img",{src:e.pictures[0].path,className:"card-img-top image-responsive",alt:""}),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-text"},e.city),r.a.createElement("p",{className:"card-text"},e.homeDescription)))))})))))}}]),a}(n.Component)),T=h.a.create({baseURL:"http://localhost:3000",withCredentials:!0}),H=function(e){throw e},I=function(e){var t=b();return T.post("/user/profile/".concat(t._id,"/edit"),e).then((function(e){return e.data})).catch(H)},_=a(34),A=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={pictures:[]},n.handleFileUpload=n.handleFileUpload.bind(Object(x.a)(n)),n}return Object(i.a)(a,[{key:"handleFileUpload",value:function(e){var t=this;console.log("The file to be uploaded is: ",e.target.files[0]);var a=new FormData;a.append("pictures",e.target.files[0]),I(a).then((function(e){console.log("response is: ",e),t.setState({pictures:e.pictures}),t.props.addPicture(e.pictures.pop())})).catch((function(e){console.log("Error while uploading the file: ",e)}))}},{key:"render",value:function(){var e=this,t=this.props.user.pictures;return r.a.createElement("div",{className:"row"},t&&t.map((function(t){return r.a.createElement("div",{key:t._id,className:"col-md-12 col-lg-6 d-flex justify-content-center"},r.a.createElement("img",{src:t.path,alt:t.name,className:"col-10 m-1"}),r.a.createElement("div",{className:"col-2"},r.a.createElement("button",{type:"submit",className:"p-2 ",onClick:function(){return e.props.deletePictures(t._id)}},r.a.createElement(j.a,{icon:O.b}))))})),r.a.createElement("input",{onChange:function(t){return e.handleFileUpload(t)},key:Object(_.a)(),type:"file",name:"pictures",className:"form-control-file"}),this.state.error&&r.a.createElement("p",null,this.state.error))}}]),a}(n.Component),R=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={user:{},error:null},e.handleChange=e.handleChange.bind(Object(x.a)(e)),e.editProfile=e.editProfile.bind(Object(x.a)(e)),e.addPictureHandler=e.addPictureHandler.bind(Object(x.a)(e)),e.deletePicturesHandler=e.deletePicturesHandler.bind(Object(x.a)(e)),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;h()({url:"".concat("http://localhost:3000","/user/profile/").concat(this.props.match.params.id),withCredentials:!0,method:"GET"}).then((function(t){var a=t.data;e.setState({user:a})})).catch((function(t){e.setState({error:t})}))}},{key:"handleChange",value:function(e){var t=Object(S.a)({},this.state.user);t[e.target.name]=e.target.value,this.setState({user:t})}},{key:"editProfile",value:function(e){var t=this;e.preventDefault(),h()({url:"".concat("http://localhost:3000","/user/profile/").concat(this.props.match.params.id,"/edit"),data:f.a.stringify(this.state.user),withCredentials:!0,method:"POST"}).then((function(e){t.props.profileUpdate(e.data),t.props.history.push("/user/profile/".concat(e.data._id))})).catch((function(e){t.setState({error:e})}))}},{key:"addPictureHandler",value:function(e){var t=JSON.parse(JSON.stringify(this.state.user));t.pictures.push(e),this.setState({user:t})}},{key:"deletePicturesHandler",value:function(e){var t=this;h()({url:"".concat("http://localhost:3000","/user/profile/").concat(this.props.match.params.id,"/edit/delete/").concat(e),withCredentials:!0,method:"GET"}).then((function(a){var n,r=JSON.parse(JSON.stringify(t.state.user));r.pictures.forEach((function(t,a){t._id===e&&(n=a)})),r.pictures.splice(n,1),t.setState({user:r})})).catch((function(e){t.setState({error:e})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.editProfile},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"firstname"},"Name"),r.a.createElement("input",{className:"form-control",type:"text",onChange:this.handleChange,name:"name",value:this.state.user.name,placeholder:"First name"})),r.a.createElement("div",{className:"form-group "},r.a.createElement("label",{htmlFor:"lastname"},"Home name"),r.a.createElement("input",{className:"form-control",type:"text",onChange:this.handleChange,name:"homeName",value:this.state.user.homeName,placeholder:"Home name"})),r.a.createElement("div",{className:"form-group "},r.a.createElement("label",{htmlFor:"email"},"Home description"),r.a.createElement("textarea",{className:"form-control",onChange:this.handleChange,name:"homeDescription",value:this.state.user.homeDescription,placeholder:"Home description"})),r.a.createElement("div",{className:"form-group "},r.a.createElement("label",{htmlFor:"email"},"City"),r.a.createElement("input",{className:"form-control",type:"text",onChange:this.handleChange,name:"city",value:this.state.user.city,placeholder:"City"}))),r.a.createElement(u.b,{path:"/user/profile/:id/edit",render:function(){return r.a.createElement(A,{addPicture:e.addPictureHandler,deletePictures:e.deletePicturesHandler,user:e.state.user})}}),this.state.error&&r.a.createElement("p",null,this.state.error),r.a.createElement("div",{className:"col justify-content-center d-flex"},r.a.createElement("button",{onClick:this.editProfile},"Submit")))}}]),a}(n.Component),L=(a(132),a(133),function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.user.pictures;return r.a.createElement("div",{className:"row justify-content-center m-3"},r.a.createElement("div",{className:"col-md-10 col-lg-4 my-2"},r.a.createElement("h2",null,"Home details"),r.a.createElement("p",null,r.a.createElement("strong",null,"Home name: "),this.props.user.homeName),r.a.createElement("p",null,r.a.createElement("strong",null,"Home location: "),this.props.user.city),r.a.createElement("p",null,r.a.createElement("strong",null,"Description: "),this.props.user.homeDescription),r.a.createElement("p",null,r.a.createElement("strong",null,"Owner: "),this.props.user.name)),r.a.createElement("div",{className:"col-md-10 col-lg-7 m-2 carousel"},r.a.createElement(k.a,null,e&&e.map((function(e){return r.a.createElement(k.a.Item,{key:e._id},r.a.createElement("img",{className:"d-block w-100",src:e.path,alt:e.name}))})))))}}]),a}(n.Component)),J=a(35),Y=a.n(J),W=a(45),B=(a(57),a(58),a(59),function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={availability:null,startDate:new Date,endDate:null,selecting:!1},e.handleChange=e.handleChange.bind(Object(x.a)(e)),e.addAvailability=e.addAvailability.bind(Object(x.a)(e)),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get("".concat("http://localhost:3000","/user/profile/").concat(this.props.match.params.id),{withCredentials:!0}).then((function(t){var a=t.data.availability.map((function(e){var t=new Date(e);return Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())}));e.setState({availability:a})})).catch((function(t){e.setState({error:t})}))}},{key:"handleChange",value:function(e){this.state.selecting?e<this.state.startDate?this.setState({startDate:e,selecting:!0}):this.setState({endDate:e,selecting:!1}):this.setState({startDate:e,selecting:!0})}},{key:"addAvailability",value:function(e){var t=this;e.preventDefault();var a=[];null===this.state.endDate?a.push(new Date(this.state.startDate)):Object.values(Object(W.a)({start:new Date(this.state.startDate),end:new Date(this.state.endDate)})).forEach((function(e){return a.push(e)}));var n=a.map((function(e){var t=new Date(e);return Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())}));h()({url:"".concat("http://localhost:3000","/user/profile/").concat(this.props.match.params.id,"/availabilty"),data:f.a.stringify(n),withCredentials:!0,method:"POST"}).then((function(e){t.props.profileUpdate(e.data),t.props.history.push("/user/profile/".concat(e.data._id))})).catch((function(e){t.setState({error:e})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center"},r.a.createElement(Y.a,{inline:!0,excludeDates:this.state.availability,onChange:this.handleChange,startDate:this.state.startDate,endDate:this.state.endDate}),r.a.createElement("div",{className:"col"},r.a.createElement("button",{onClick:this.addAvailability,type:"submit"},"Submit")))}}]),a}(r.a.Component)),G=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={availability:null,startDate:new Date,endDate:null,selecting:!1},e.handleChange=e.handleChange.bind(Object(x.a)(e)),e.addAvailability=e.addAvailability.bind(Object(x.a)(e)),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get("".concat("http://localhost:3000","/user/profile/").concat(this.props.match.params.id),{withCredentials:!0}).then((function(t){var a=t.data.availability.map((function(e){var t=new Date(e);return Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())}));e.setState({availability:a})})).catch((function(t){e.setState({error:t})}))}},{key:"handleChange",value:function(e){this.state.selecting?e<this.state.startDate?this.setState({startDate:e,selecting:!0}):this.setState({endDate:e,selecting:!1}):this.setState({startDate:e,selecting:!0})}},{key:"addAvailability",value:function(e){var t=this;e.preventDefault();var a=[];null===this.state.endDate?a.push(new Date(this.state.startDate)):Object.values(Object(W.a)({start:new Date(this.state.startDate),end:new Date(this.state.endDate)})).forEach((function(e){return a.push(e)}));var n=a.map((function(e){var t=new Date(e);return Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())}));h()({url:"".concat("http://localhost:3000","/user/profile/").concat(this.props.match.params.id,"/removeavailabilty"),data:f.a.stringify(n),withCredentials:!0,method:"POST"}).then((function(e){t.props.profileUpdate(e.data),t.props.history.push("/user/profile/".concat(e.data._id))})).catch((function(e){t.setState({error:e})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Y.a,{inline:!0,includeDates:this.state.availability,onChange:this.handleChange,startDate:this.state.startDate,endDate:this.state.endDate}),r.a.createElement("div",{className:"col justify-content-center d-flex"},r.a.createElement("button",{onClick:this.addAvailability,type:"submit"},"Submit")))}}]),a}(r.a.Component),q=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={availability:null},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get("".concat("http://localhost:3000","/user/profile/").concat(this.props.user._id),{withCredentials:!0}).then((function(t){var a=t.data.availability.map((function(e){var t=new Date(e);return Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())}));e.setState({availability:a})})).catch((function(t){e.setState({error:t})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Y.a,{inline:!0,includeDates:this.state.availability}))}}]),a}(r.a.Component),z=a(51),Z=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={review:{},error:null},n.handleChange=n.handleChange.bind(Object(x.a)(n)),n.addReview=n.addReview.bind(Object(x.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(S.a)({},this.state.review);e.profile_id=this.props.userId,this.setState({review:e})}},{key:"handleChange",value:function(e){var t=Object(S.a)({},this.state.review);t[e.target.name]=e.target.value,this.setState({review:t})}},{key:"addReview",value:function(e){var t=this;e.preventDefault(),document.getElementById("review").reset(),h()({url:"".concat("http://localhost:3000","/user/review/create"),data:f.a.stringify(this.state.review),withCredentials:!0,method:"POST"}).then((function(e){t.props.reviewUpdate(e.data),t.props.history.push("/user/profile/".concat(t.props._id,"/reviews"))})).catch((function(e){t.setState({error:e})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"row d-flex justify-content-center text-center m-3"},r.a.createElement("form",{className:"col-10 p-2",id:"review"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"review"},"Review"),r.a.createElement("textarea",{className:"form-control",onChange:this.handleChange,name:"content",placeholder:"Leave a review"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"score"},"Score"),r.a.createElement("input",{type:"range",name:"score",className:"form-control-range range",min:"1",max:"10",onChange:this.handleChange})),r.a.createElement("button",{onClick:this.addReview,type:"submit"},"Submit")))}}]),a}(n.Component),X=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={reviews:[]},e.currentUser=b(),e.reviewUpdate=e.reviewUpdate.bind(Object(x.a)(e)),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get("".concat("http://localhost:3000","/user/profile/").concat(this.props.user._id,"/reviews"),{withCredentials:!0}).then((function(t){var a=t.data;e.setState({reviews:a})})).catch((function(t){e.setState({error:t})}))}},{key:"reviewUpdate",value:function(e){var t=Object(z.a)(this.state.reviews);t.push(e[0]),this.setState({reviews:t})}},{key:"render",value:function(){return null===this.state.reviews?r.a.createElement("h1",null,"No reviews for this user."):(this.currentUser._id!==this.props.user._id&&(e=r.a.createElement(Z,{userId:this.props.user._id,reviewUpdate:this.reviewUpdate})),r.a.createElement("div",{className:"row d-flex justify-content-center text-center m-3"},r.a.createElement("div",{className:"col-10"},r.a.createElement("h4",{className:"my-2"},"Reviews")),r.a.createElement("div",{className:"col-10 d-flex justify-content-center d-flex flex-column"},this.state.reviews.map((function(e){return r.a.createElement("div",{className:"text-wrap list-text m-2",key:Object(_.a)()},r.a.createElement("p",null,e.content),r.a.createElement("h6",null,r.a.createElement("span",{className:"font-weight-bold"},"Reviewed by: "),e.reviewer.name," ",r.a.createElement("span",{className:"font-weight-bold"},"Score: "),e.score),r.a.createElement("hr",null))}))),r.a.createElement("div",{className:"col-8"},e)));var e}}]),a}(n.Component),K=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).sendMessage=n.sendMessage.bind(Object(x.a)(n)),n}return Object(i.a)(a,[{key:"sendMessage",value:function(e){var t=this;e.preventDefault(),h()({url:"".concat("http://localhost:3000","/conversation/create/").concat(this.props.match.params.id),withCredentials:!0,method:"POST"}).then((function(e){t.props.history.push("/conversations/".concat(e.data))})).catch((function(e){t.setState({error:e})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col my-2 d-flex justify-content-end"},r.a.createElement("button",{onClick:this.sendMessage},"Send message")))}}]),a}(n.Component),Q=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={user:null,form:!1,error:null,editCalendar:!1,removeDates:!1,calendar:!0},n.currentUser=b(),n.fetchUser=n.fetchUser.bind(Object(x.a)(n)),n.toggleForms=n.toggleForms.bind(Object(x.a)(n)),n.profileUpdate=n.profileUpdate.bind(Object(x.a)(n)),n.deleteUserHandler=n.deleteUserHandler.bind(Object(x.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.id!==e.match.params.id&&this.fetchUser()}},{key:"fetchUser",value:function(){var e=this;h.a.get("".concat("http://localhost:3000","/user/profile/").concat(this.props.match.params.id),{withCredentials:!0}).then((function(t){var a=t.data;e.setState({user:a})})).catch((function(t){e.setState({error:t})}))}},{key:"toggleForms",value:function(e){switch(e){case"form":this.setState({form:!0,addDates:!1,removeDates:!1,calendar:!1});break;case"addDates":this.setState({form:!1,addDates:!0,removeDates:!1,calendar:!1});break;case"removeDates":this.setState({form:!1,addDates:!1,removeDates:!0,calendar:!1});break;default:this.setState({form:!1,addDates:!1,removeDates:!1,calendar:!0})}}},{key:"profileUpdate",value:function(e){this.fetchUser(),this.setState({form:!1,addDates:!1,removeDates:!1,calendar:!0})}},{key:"deleteUserHandler",value:function(){var e=this;h.a.get("".concat("http://localhost:3000","/user/profile/").concat(this.props.match.params.id,"/delete"),{withCredentials:!0}).then((function(){g(),e.props.history.push("/")})).catch((function(t){e.setState({error:t.response.data.message})}))}},{key:"render",value:function(){var e=this;return null===this.state.user?r.a.createElement(C,null,r.a.createElement("div",{className:"lds-ring col-12 d-flex justify-content-center mt-5"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))):this.currentUser._id===this.props.match.params.id?r.a.createElement(C,null,r.a.createElement("div",{className:"container-fluid"},r.a.createElement(L,{user:this.state.user}),r.a.createElement("div",{className:"row justify-content-center m-3"},r.a.createElement("div",{className:"col-md-10 my-2"},r.a.createElement("h4",null,"Edit Profile & Availability")),r.a.createElement("div",{className:"row justify-content-center m-3"},r.a.createElement("div",{className:"col-md-12 col-lg-8"},this.state.calendar&&r.a.createElement(q,{user:this.state.user}),this.state.form&&r.a.createElement(u.b,{path:"/user/profile/:id/edit",render:function(t){return r.a.createElement(R,Object.assign({},t,{user:e.state.user,profileUpdate:e.profileUpdate}))}}),this.state.addDates&&r.a.createElement(u.b,{path:"/user/profile/:id/available",render:function(t){return r.a.createElement(B,Object.assign({},t,{user:e.state.user,profileUpdate:e.profileUpdate}))}}),this.state.removeDates&&r.a.createElement(u.b,{path:"/user/profile/:id/removeavailability",render:function(t){return r.a.createElement(G,Object.assign({},t,{user:e.state.user,profileUpdate:e.profileUpdate}))}})),r.a.createElement("div",{className:"col-md-12 col-lg-4 d-flex flex-column align-items-center"},r.a.createElement(N.b,{className:"button profile-button",to:"/user/profile/".concat(this.props.match.params.id,"/edit"),onClick:function(){return e.toggleForms("form")}},"Edit Profile"),r.a.createElement(N.b,{className:"button profile-button",to:"/user/profile/".concat(this.props.match.params.id,"/removeavailability"),onClick:function(){return e.toggleForms("removeDates")}},"Remove Availability"),r.a.createElement(N.b,{className:"button profile-button",to:"/user/profile/".concat(this.props.match.params.id,"/available"),onClick:function(){return e.toggleForms("addDates")}},"Provide Availability"),r.a.createElement("button",{className:"button profile-button",onClick:this.deleteUserHandler,type:"submit"},"Delete your profile")))),r.a.createElement("div",{className:"row d-flex justify-content-center m-3"},r.a.createElement("div",{className:"col-md-10 my-2"},r.a.createElement(X,{user:this.state.user}))))):r.a.createElement(C,null,r.a.createElement("div",{className:"container-fluid"},r.a.createElement(K,Object.assign({},this.props,{className:"button"})),r.a.createElement(L,{user:this.state.user}),r.a.createElement("div",{className:"row d-flex justify-content-center m-3"},r.a.createElement("div",{className:"col-md-10 my-2"},r.a.createElement("h4",null,"Availability of Property")),r.a.createElement("div",{className:"col-md-10 my-2 d-flex justify-content-center"},r.a.createElement(q,{user:this.state.user}))),r.a.createElement("div",{className:"row d-flex justify-content-center m-3"},r.a.createElement("div",{className:"col-md-10 my-2"},r.a.createElement(X,{user:this.state.user})))))}}]),a}(n.Component),V=a(54),$=a.n(V),ee=(a(189),function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"membercard col-md-12 col-lg-6"},this.props.user?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Home Details"),r.a.createElement("div",{className:"d-flex justify-content-center text-center flex-column"},r.a.createElement(N.b,{to:"/user/profile/".concat(this.props.user._id),className:"link-group d-flex justify-content-center flex-column member-card"},r.a.createElement("p",{className:"card-text"},r.a.createElement("strong",null,"Home Name:")),r.a.createElement("p",{className:"card-text member-hover"},this.props.user.homeName))),r.a.createElement("div",{className:"d-flex justify-content-center text-center flex-column"},r.a.createElement("div",{className:"card-body d-flex justify-content-center flex-column"},r.a.createElement("p",{className:"card-text"},r.a.createElement("strong",null,"Home Location:")),r.a.createElement("p",{className:"card-text"},this.props.user.city),r.a.createElement("p",{className:"card-text"},r.a.createElement("strong",null,"Description:")),r.a.createElement("p",{className:"card-text"},this.props.user.homeDescription),r.a.createElement("p",{className:"card-text"},r.a.createElement("strong",null,"Owner:")),r.a.createElement("p",{className:"card-text"},this.props.user.name)))):r.a.createElement("h1",null,"Select Property"))}}]),a}(n.Component)),te=(a(190),{height:"100vh"}),ae=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:te,ref:this.props.innerRef,className:"map col-md-12 col-lg-6"})}}]),a}(r.a.Component),ne=r.a.forwardRef((function(e,t){return r.a.createElement(ae,Object.assign({innerRef:t},e))}));$.a.accessToken="".concat("pk.eyJ1IjoibmllbmtlMDkwNSIsImEiOiJja2MwYWludnAxaHM2MnRsZ3c4b3l0dHNqIn0.FIQX7sNolXaZEVPAUxOIrg");var re=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).setNewUser=n.setNewUser.bind(Object(x.a)(n)),n.state={users:[],user:null},n.mapRef=r.a.createRef(),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new $.a.Map({container:this.mapRef.current,style:"mapbox://styles/mapbox/streets-v11",center:[5,50],zoom:4});t.on("move",(function(){e.setState({lng:t.getCenter().lng.toFixed(4),lat:t.getCenter().lat.toFixed(4),zoom:t.getZoom().toFixed(2)})}));var a=this.props.history,n=this;h()({url:"".concat("http://localhost:3000","/user/list"),method:"GET",withCredentials:!0}).then((function(r){r.data.forEach((function(e){var r=document.createElement("div");r.className="marker",r.style.backgroundImage="url(/marker.png)",r.style.backgroundSize="contain",r.style.width="40px",r.style.height="58px",r.style.top="-29px",r.addEventListener("click",(function(){n.setState({user:e}),a.push("/map/member/".concat(e._id))})),new $.a.Marker(r).setLngLat(e.geometry.coordinates).addTo(t)})),e.setState({users:r.data})}))}},{key:"setNewUser",value:function(e){var t=e;this.setState({user:t})}},{key:"render",value:function(){var e=this;return r.a.createElement(C,null,r.a.createElement("div",{className:"mapContainer container-fluid"},r.a.createElement(ne,Object.assign({},this.props,{ref:this.mapRef})),r.a.createElement(u.b,{exact:!0,path:"/map/member/:userId",render:function(t){return r.a.createElement(ee,{user:e.state.user})}})))}}]),a}(n.Component),se=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={message:{},error:null},n.handleChange=n.handleChange.bind(Object(x.a)(n)),n.postMessage=n.postMessage.bind(Object(x.a)(n)),n}return Object(i.a)(a,[{key:"handleChange",value:function(e){var t=Object(S.a)({},this.state.message);t[e.target.name]=e.target.value,this.setState({message:t})}},{key:"postMessage",value:function(e){var t=this;e.preventDefault(),document.getElementById("post-message").reset(),h()({url:"".concat("http://localhost:3000","/message/create/").concat(this.props.convId),data:f.a.stringify(this.state.message),withCredentials:!0,method:"POST"}).then((function(e){var a=e.data[0];t.props.postMessage(a),t.props.history.push("/conversations/".concat(t.props.convId))})).catch((function(e){t.setState({error:e})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"post-message"},r.a.createElement("form",{id:"post-message"},r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{className:"form-control",onChange:this.handleChange,name:"message",placeholder:"Your message"})),r.a.createElement("button",{onClick:this.postMessage,type:"submit"},"Post")))}}]),a}(n.Component),le=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={messages:[],error:null},n.transformDate=n.transformDate.bind(Object(x.a)(n)),n.getTime=n.getTime.bind(Object(x.a)(n)),n.postMessage=n.postMessage.bind(Object(x.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get("".concat("http://localhost:3000","/message/conversation/").concat(this.props.match.params.conversationId),{withCredentials:!0}).then((function(t){var a=t.data;e.setState({messages:a})})).catch((function(t){e.setState({error:t})}))}},{key:"transformDate",value:function(e){return new Date(e).toDateString()}},{key:"getTime",value:function(e){var t=new Date(e),a=t.getHours();a=a<10?"0".concat(a):"".concat(a);var n=t.getMinutes();return n=n<10?"0".concat(n):"".concat(n),"".concat(a,":").concat(n)}},{key:"postMessage",value:function(e){var t=Object(z.a)(this.state.messages);t.push(e),this.setState({messages:t})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"conversation"},this.state.messages&&this.state.messages.map((function(t){return r.a.createElement("div",{className:"message",key:t._id},r.a.createElement("p",null,t.message),r.a.createElement("p",null,r.a.createElement("i",null,t.from.username," - ",e.transformDate(t.createdAt)," ",e.getTime(t.createdAt))),r.a.createElement("hr",null))})),r.a.createElement(se,{postMessage:this.postMessage,convId:"".concat(this.props.match.params.conversationId)}))}}]),a}(n.Component),ce=(a(191),function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={conversations:[],error:null},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get("".concat("http://localhost:3000","/conversation/my-conversations"),{withCredentials:!0}).then((function(t){var a=t.data;e.setState({conversations:a})})).catch((function(t){e.setState({error:t})}))}},{key:"render",value:function(){return 0===this.state.conversations.length?r.a.createElement(C,null,r.a.createElement("h4",null,"No conversations yet. Why not try sending a message?")):r.a.createElement(C,null,r.a.createElement("div",{className:"container-fluid d-flex"},r.a.createElement("div",{className:"col-3"},r.a.createElement("h4",null,"Chats"),this.state.conversations&&this.state.conversations.map((function(e){return r.a.createElement("div",{key:e[1]._id},r.a.createElement(N.b,{to:"/conversations/".concat(e[0])},r.a.createElement("p",{className:"conversation-link"},e[1].username)))}))),r.a.createElement("div",{className:"col-9"},r.a.createElement("h4",null,"Messages"),r.a.createElement(u.b,{path:"/conversations/:conversationId",render:function(e){return r.a.createElement(le,Object.assign({key:Object(_.a)()},e))}}))))}}]),a}(n.Component)),ie=(a(192),function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(C,null,r.a.createElement("h2",null,"Page not found"),r.a.createElement("img",{src:"https://media.giphy.com/media/M28rUlcjueKUE/giphy.gif",alt:"sad gif"}))}}]),a}(n.Component)),oe=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",component:D}),r.a.createElement(u.b,{exact:!0,path:"/user/signup",component:U}),r.a.createElement(u.b,{exact:!0,path:"/user/login",component:M}),r.a.createElement(u.b,{exact:!0,path:"/user/logout",component:P}),r.a.createElement(u.b,{exact:!0,path:"/properties",component:F}),r.a.createElement(y,{path:"/user/profile/:id",redirectTo:"/user/login",component:Q}),r.a.createElement(u.b,{path:"/map",component:re}),r.a.createElement(y,{path:"/conversations",redirectTo:"user/login",component:ce}),r.a.createElement(u.b,{path:"/",component:ie})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(193);l.a.render(r.a.createElement(N.a,null,r.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},42:function(e,t,a){},59:function(e,t,a){},85:function(e,t,a){},99:function(e,t,a){e.exports=a(194)}},[[99,1,2]]]);
//# sourceMappingURL=main.8c4c4419.chunk.js.map